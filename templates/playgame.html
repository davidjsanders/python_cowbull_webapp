{% extends "base_template.html" %}
{% block title %}CowBull SPA{% endblock %}
{% block header %}
<script type="text/javascript">
    /* Define globals */
    g_digits = {{digits}};
    g_guesses = {{guesses}};
    g_try = 0;
    g_key = "{{key}}";
</script>
<script src="{{ url_for('static', filename='js/validateDigit.js') }}?v=0.2"></script>
<script src="{{ url_for('static', filename='js/makeGuess.js') }}?v=0.4.03"></script>
<h1>CowBull SPA</h1>
{% endblock %}
{% block body %}
<p>
    Okay, <strong><em>Game On!</em></strong> Get ready to guess {{digits}} digits.
    Remember, digits are integer (whole) numbers between 0 and 9. Today, you were
    served by {{served_by}} and your unique game key is {{key}}
</p>
<p>
    <span id="play_status">
        You have {{guesses}} guesses remaining. Please make your first guess.
    </span>
</p>
<hr>
<form>
    &nbsp;
    {% for i in range(digits) %}
        <input id="digit_{{i}}"
               required="required"
               name="digit_{{i}}_name"
               type="text"
               width="2"
               type="number"
               value="{{i}}"
               onblur="validateDigit(this);"
        > &nbsp;
    {% endfor %}
    <script type="text/javascript">
        for (i = 0; i < g_guesses; i++) {
            var digit = document.getElementById('digit_'+i);
/*            digit.addEventListener("blur", validateDigit); */
        }
    </script>
    <input type="button"
           class="btn-primary"
           value="Make a guess"
           onclick="makeGuess();"
    >
    &nbsp;
    <span id="error_status"></span>
</form>
<hr>
<table class="table">
    <thead>
        <tr>
            <th>Try</th>
            {% for i in range(digits) %}
                {% set header = i + 1 %}
                <th>Digit {{header}}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for i in range(guesses) %}
            {% set row = i + 1 %}
            <tr>
                <td>{{row}}</td>
                {% for j in range(digits) %}
                    <td>
                        <span id="row_{{i}}_col_{{j}}">&nbsp;&nbsp;</span>
                    </td>
                {% endfor %}
            </tr>
        {% endfor %}
    </tbody>
</table>
<hr>
<p>Start a new game: </p>
<p>
    <form action="/" method="post">
        {% for mode in modes_table %}
            <input class="btn-primary" type="submit" name="mode" value="{{mode.mode}}"/>
        {% endfor %}
    </form>
</p>
{% endblock %}
{% block footer %}
<p class="bg-info small"><strong>CowBull version 0.1</strong></p>
{% endblock %}
